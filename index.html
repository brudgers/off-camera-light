<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-04-17 Mon 16:01 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<meta name="generator" content="Org mode" />
<meta name="author" content="benrudgers" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgf7c5e9e">1. Program purpose</a>
<ul>
<li><a href="#orgde690a0">1.1. Program Outline</a></li>
<li><a href="#orgce10704">1.2. Base formula</a></li>
<li><a href="#org9e523e0">1.3. Constraint Network Approach</a></li>
</ul>
</li>
<li><a href="#org09b57e3">2. Objects?</a>
<ul>
<li><a href="#org6b84da1">2.1. Light</a></li>
<li><a href="#org0f67364">2.2. Camera</a></li>
<li><a href="#org7bcacb5">2.3. Scene</a>
<ul>
<li><a href="#org030a9cc">2.3.1. Light Value</a></li>
<li><a href="#orgf00b01f">2.3.2. Subject</a></li>
<li><a href="#org72abe91">2.3.3. Foreground</a></li>
<li><a href="#orgb6f39dd">2.3.4. Background</a></li>
</ul>
</li>
<li><a href="#orgdaa3d69">2.4. World&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TODO">TODO</span></span></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgf7c5e9e" class="outline-2">
<h2 id="orgf7c5e9e"><span class="section-number-2">1</span> Program purpose</h2>
<div class="outline-text-2" id="text-1">
<p>
The purpose of the program is to provide a flexible way of estimating the correct settings of a photographic speed light and DSLR camera for a simple scene and likewise estimate the correct construction of a scene given the settings of a speedlight and camera.
</p>
</div>
<div id="outline-container-orgde690a0" class="outline-3">
<h3 id="orgde690a0"><span class="section-number-3">1.1</span> Program Outline</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">
<pre class="src src-smalltalk">  "off-camera-light.st"
  "Estimates the setting for using a camera and speed light or conversely estimates the necessary scene parameters based on camera and speed light settings"

Namespace current: OffCameraLight [

    &lt;&lt;light-value&gt;&gt;

    &lt;&lt;camera&gt;&gt;

    &lt;&lt;light&gt;&gt;

    &lt;&lt;subject&gt;&gt;

    &lt;&lt;scene&gt;&gt;

 ]
</pre>
</div>
<p>
Perhaps the one of the interesting features of this program is that it uses GNU Smalltalk's namespaces. The reason I find it interesting is that literate programming allows the use of namespace while still writing code that is <i>right justified</i> in the editor. By which I mean that the logical nesting of namespace contents wrapped by <code>[...]</code> does not result in redundant indentation when editing the code blocks. For me, having code indented off the left margin when the context for the indentation is irrelevant is ergonomically poor. It bothered me when writing Racket Modules and I prefer Common Lisp's <code>(in-package ...)</code> declarative syntax to explicit nesting. YMMV.
</p>
</div>
</div>
<div id="outline-container-orgce10704" class="outline-3">
<h3 id="orgce10704"><span class="section-number-3">1.2</span> Base formula</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Working distance at full illumination equals light rating divided by f-stop at ISO 100.
</p>

<p>
working<sub>distance</sub> = (rating * (log<sub>2</sub>(ISO/100) + 1)) / f-stop.
</p>

<p>
rating = base power / power setting 
</p>
</div>
</div>

<div id="outline-container-org9e523e0" class="outline-3">
<h3 id="org9e523e0"><span class="section-number-3">1.3</span> Constraint Network Approach</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Given that the goal is to establish a two way relationship circle <b>light &lt;-&gt; camera &lt;-&gt; scene &lt;-&gt; light</b> this seems like a problem for constraint networks.
</p>
</div>
</div>
</div>
<div id="outline-container-org09b57e3" class="outline-2">
<h2 id="org09b57e3"><span class="section-number-2">2</span> Objects?</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-org6b84da1" class="outline-3">
<h3 id="org6b84da1"><span class="section-number-3">2.1</span> Light</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-smalltalk" id="orgf1ae0c9">Object subclass: Light [
    "A class to model a speedlight state."
    | rating power_setting |
    guide_number [
        "Get the rating of a speedlight."
        ^rating.
    ]
    guide_number: aDistance [
        "Set the rating of a speedlight."
        rating := aDistance.
    ]
    power [
        "Get the power setting of the speedlight."
        ^power_setting.
    ]
    power: aNumber [
        "Get the power setting of the speedlight."
        power_setting := aNumber.
    ]
]
</pre>
</div>
</div>
</div>
<div id="outline-container-org0f67364" class="outline-3">
<h3 id="org0f67364"><span class="section-number-3">2.2</span> Camera</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-smalltalk" id="org9fac9e4">Object subclass: Camera [
"The basis for variable names is Manual of Photography 10th edition.
   n  is relative aperture
   t  is shutter speed
   s  is sensitivity based" 
    | n t s |
    &lt;comment: 'A class for describing the state of a camera.'&gt;

    &lt;&lt;camera-init&gt;&gt;

    aperture [
        "Get the aperture value."
        ^n.
    ]
    aperture: stop [
        "Set the camera's aperture."
        n := stop.
    ]
    shutter [
        "Get camera's shutter speed."
        ^t.
    ]
    shutter: time [
        "Set camera's shutter speed."
        t := time.
    ]
    iso [
        "Get camera's sensitivity setting."
        ^s.
    ]
    iso: sensitivity [
        "Set camera's sensitivity setting."        
        s := sensitivity.
    ]
    eV [
        | sunny16Ev aperture shutter iso rawEv |
        "Calculate the Exposure Value."
        sunny16Ev := 8. 
        aperture := n squared log: 2.
        shutter := 100 / (1/t) log: 2.
        iso := (s / 100) log: 2.
        rawEv := aperture + shutter + iso.
        ^'Not yet implemented'.
    ]
    sunny16 [
        "Calculate the number of stops away from Sunny 16 settings."
        ^eV - 15.
    ]
]
</pre>
</div>
<p>
Create and initialize a camera. Code ends with <code>yourself</code> to return the object rather than the value of the last expression.
</p>
<div class="org-src-container">
<pre class="src src-smalltalk" id="orgf664688">Camera class &gt;&gt; aperture: stop shutter: time iso: sensitivity [
    ^(self new)
    aperture: stop;
    shutter: time;
    iso: sensitivity;
    yourself.
]
</pre>
</div>
</div>
</div>
<div id="outline-container-org7bcacb5" class="outline-3">
<h3 id="org7bcacb5"><span class="section-number-3">2.3</span> Scene</h3>
<div class="outline-text-3" id="text-2-3">
<p>
A scene for our purpose has a camera, speedlight, a subject, and a light value.
</p>
<div class="org-src-container">
<pre class="src src-smalltalk" id="org702c4e2">Object subclass: Scene [
    | subject lV foreground background |
    "A container for all the components of a photograph (sort of)."
]
</pre>
</div>
</div>
<div id="outline-container-org030a9cc" class="outline-4">
<h4 id="org030a9cc"><span class="section-number-4">2.3.1</span> Light Value</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
The light value in a scene is a scalar of the reflected light reaching the camera (on average). In this project it is implemented as a "global" variable of the namespace <code>OffCameraLight</code>.
</p>
<div class="org-src-container">
<pre class="src src-smalltalk" id="orgc7bf042">"The values and descriptions are from http://www.crakephoto.com/reference/index.html"
&lt;comment: 'A dictionary associating light values with scene descriptions'&gt;
LightValue := Dictionary new.
LightValue at: 17 put: 'Rarely seen in nature'.
LightValue at: 16 put: 'Bright sunlight off of sand or snow'.
LightValue at: 15 put: 'Bright hazy sunlight'.
LightValue at: 14 put: 'Weak hazy sunlight'.
LightValue at: 13 put: 'Bright cloudy day'.
LightValue at: 12 put: 'Overcast day'.
LightValue at: 11 put: 'Shade on a bright day or during sunrise/set'.
LightValue at: 10 put: 'Dusk or dawn'.
LightValue at:  9 put: 'Late dusk or early dawn'.
LightValue at:  8 put: 'Times square at night 	'.
LightValue at:  7 put: 'Brightly lit street 	'.
LightValue at:  6 put: 'Bright interior 	'.
LightValue at:  5 put: 'Average interior or auditorium'.
LightValue at:  4 put: 'Christmas or candle lights'.
LightValue at:  3 put: 'Fireworks (emitted)'.
LightValue at:  2 put: 'Lightning from a distance (emitted)'.
LightValue at:  1 put: 'City skyline at night (emitted)'.
LightValue at:  0 put: 'Dim ambient light'.
LightValue at: -1 put: 'Really dim ambient light'.
LightValue at: -2 put: 'Full moon off of sand or snow'.
LightValue at: -3 put: 'Full moon'.
LightValue at: -4 put: 'Half moon'.
LightValue at: -5 put: 'Crescent moon'.
LightValue at: -6 put: 'Starlight'.
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf00b01f" class="outline-4">
<h4 id="orgf00b01f"><span class="section-number-4">2.3.2</span> Subject</h4>
<div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">
<pre class="src src-smalltalk" id="orgc2d04e3">Object subclass: Subject [
    | d |
    "A class to describe a photographic subject."
    distance [
        "Get the distance to a subject."
        ^d.
    ]

    distance: aNumber [
        "Set the distance to a subject."
        d := aNumber.
    ]
]
</pre>
</div>
</div>
</div>
<div id="outline-container-org72abe91" class="outline-4">
<h4 id="org72abe91"><span class="section-number-4">2.3.3</span> Foreground</h4>
</div>
<div id="outline-container-orgb6f39dd" class="outline-4">
<h4 id="orgb6f39dd"><span class="section-number-4">2.3.4</span> Background</h4>
</div>
</div>
<div id="outline-container-orgdaa3d69" class="outline-3">
<h3 id="orgdaa3d69"><span class="section-number-3">2.4</span> World&#xa0;&#xa0;&#xa0;<span class="tag"><span class="TODO">TODO</span></span></h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">
<pre class="src src-smalltalk" id="orgcb63861">Object subclass: world [
    | scene camera light |
    "A class to simulate a photographic environment."
]
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: benrudgers</p>
<p class="date">Created: 2017-04-17 Mon 16:01</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
